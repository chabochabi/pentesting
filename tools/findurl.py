#!/usr/bin/python

import sys
import requests
import re
import argparse

parser = argparse.ArgumentParser(description="find all URLs in a URL o_O")
parser.add_argument('-u', '--url', required=True)
args = parser.parse_args()

json_api = requests.get(args.url)

p = re.compile("(http|ftp|https):\/\/([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:/~+#-]*[\w@?^=%&/~+#-])?")
json_api_text = json_api.text.replace("\\/", "/")

matches = p.findall(json_api_text)
urls = list()
for groups in matches:
	url = "%s://%s%s" % (groups[0], groups[1], groups[2])
	if url not in urls:
		urls.append(url)

print("[*] found %d URLs in %s\n" % (len(urls), args.url))
for url in urls:
	print(url)
